<div *ngIf="form" [formGroup]="form">

    <div fxLayout="column">

        <app-select-enum enumName="Relationship"
                         formControlName="familyRelationship"
                         (selectionChange)="update()"
                         placeholder="Rôle dans la famille"
        ></app-select-enum>

        <mat-form-field>
            <mat-label>Prénom</mat-label>
            <input matInput formControlName="firstName" (change)="update()">
            <mat-error *ngIf="form.get('firstName').hasError('maxlength')">
                Maximum {{form.get('firstName').errors.maxlength.requiredLength}} caractères
            </mat-error>
            <mat-error *ngIf="form.get('firstName').hasError('required')">Requis</mat-error>
        </mat-form-field>

        <mat-form-field>
            <mat-label>Nom de famille</mat-label>
            <input matInput formControlName="lastName" (change)="update()">
            <mat-error *ngIf="form.get('lastName').hasError('maxlength')">
                Maximum {{form.get('lastName').errors.maxlength.requiredLength}} caractères
            </mat-error>
            <mat-error *ngIf="form.get('lastName').hasError('required')">Requis</mat-error>
        </mat-form-field>

        <app-address [form]="form" [vertical]="true" (change)="update()"></app-address>
    </div>

    <mat-divider class="margin-bottom"></mat-divider>

    <div fxLayout="column">

        <mat-form-field fxFlex>
            <mat-label>email</mat-label>
            <input matInput formControlName="email" (change)="update()">
            <app-icon matPrefix name="alternate_email"></app-icon>
            <mat-error *ngIf="form.get('email').hasError('required')">Requis</mat-error>
        </mat-form-field>

        <mat-form-field fxFlex>
            <mat-label>Nom d'utilisateur</mat-label>
            <input matInput formControlName="login" (change)="update()">
            <app-icon matPrefix name="person"></app-icon>
            <mat-error *ngIf="form.get('login').hasError('maxlength')">
                Maximum {{form.get('login').errors.maxlength.requiredLength}} caractères
            </mat-error>
            <mat-error *ngIf="form.get('login').hasError('required')">Requis</mat-error>
        </mat-form-field>

        <!--        <mat-form-field fxFlex>
                    <mat-label>Mot de passe</mat-label>
                    <input type="password" matInput formControlName="password">
                    <app-icon matPrefix name="lock"></app-icon>
                    <mat-error *ngIf="form.get('password').hasError('minlength')">
                        Minimum {{form.get('password').errors.minlength.requiredLength}} caractères
                    </mat-error>
                    <mat-error *ngIf="form.get('password').hasError('required')">Requis</mat-error>
                </mat-form-field>

                <mat-form-field fxFlex>
                    <mat-label>Confirmation du mot de passe</mat-label>
                    <input type="password" matInput formControlName="confirmPassword" [errorStateMatcher]="confirmPasswordStateMatcher">
                    <app-icon matPrefix name="lock"></app-icon>
                    <mat-error *ngIf="form.hasError('notSame')">
                        Les mot de passe ne sont pas identiques
                    </mat-error>
                </mat-form-field>-->

        <button mat-button color="primary">Demander un nouveau mot de passe</button>
    </div>

    <button mat-raised-button *ngIf="!data.model.id" (click)="create.emit()" [color]="form.invalid ? 'warn' : 'accent'"
    >Créer
    </button>

</div>
