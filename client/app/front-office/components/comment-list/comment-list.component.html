<div class="nat-vertical nat-gap-30">
    @if ((permissionsService.crud | async)?.comment?.create) {
        <div class="nat-vertical nat-left">
            <mat-form-field [style.width]="'100%'">
                <mat-label>Rédiger un commentaire</mat-label>
                <textarea matInput [(ngModel)]="newCommentValue"></textarea>
            </mat-form-field>
            <a matButton="outlined" [disabled]="publishing" (click)="addComment()">Publier</a>
        </div>
    }

    @if (dataSource?.data?.items?.length) {
        <div class="nat-vertical nat-gap-30">
            @for (comment of dataSource?.data?.items; track comment) {
                <div class="nat-vertical nat-gap-5 nat-left">
                    @if (comment.authorName) {
                        <div class="mat-font-title-lg nat-gap-15 nat-horizontal nat-wrap nat-align">
                            <span>{{ comment.authorName }}</span>
                            <span class="text-light">Posté le {{ comment.creationDate | date: 'longDate' }}</span>
                            @if (comment.permissions?.update) {
                                <a matIconButton class="mat-elevation-z4" [routerLink]="['/admin/comment', comment.id]">
                                    <mat-icon naturalIcon="edit" />
                                </a>
                            }
                        </div>
                    }
                    <div class="mat-font-title-md line-break">{{ comment.description }}</div>
                </div>
            }
        </div>
    } @else {
        <div class="mat-font-title-md">Aucun commentaire</div>
    }
</div>
