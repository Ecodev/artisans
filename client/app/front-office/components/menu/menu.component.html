<div [@transformMenu]="panelAnimationState" class="mega-menu mat-elevation-z4" role="menu">
    <div class="mega-menu-content" [style.padding-left.px]="offsetLeft" [style.min-height.px]="data.contentHeight">
        <ng-container *ngTemplateOutlet="navigationTemplate; context:{ $implicit: data.items }"></ng-container>
    </div>
</div>

<ng-template #navigationTemplate let-navigation>
    <ul *ngIf="navigation?.length">
        <li *ngFor="let item of navigation" [class.hasMenu]="item.children?.length" [class.open]="item.open">
            <a [routerLink]="item.link" matRipple (click)="item.open = !item.open">{{ item.display }}</a>
            <ng-container *ngTemplateOutlet="navigationTemplate; context:{ $implicit: item.children }"></ng-container>
        </li>
    </ul>
</ng-template>
