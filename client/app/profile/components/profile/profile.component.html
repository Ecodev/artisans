<div fxLayout="column" fxLayoutGap="30px" class="padding">

    <div fxLayout="column" fxLayout.gt-xs="row" class="padding" fxLayoutGap.gt-xs="0px" fxLayoutGap="30px">
        <div fxFlex="none" fxFlex.gt-xs fxLayout="row wrap" fxLayoutAlign="start center" fxLayoutGap="10px">
            <div fxLayout="row" fxLayoutGap="10px" fxLayoutAlign="start center">
                <ngx-avatar [name]="viewer.name" [size]="50"></ngx-avatar>
                <div>
                    <div class="mat-display-1 no-margin-bottom">{{ viewer.name }}</div>
                    <div class="mat-subheading-1 no-margin-bottom">{{ viewer.status | enum: 'UserStatus' | capitalize | async}}</div>
                </div>
            </div>
            <a mat-flat-button
               color="accent"
               *ngIf="userService.canBecomeMember(viewer)"
               [disabled]="!viewer.email"
               [matTooltip]="!viewer.email ? 'Vous devez avoir saisi une adresse e-mail dans vos données personnelles' : null"
               [routerLink]="['/user/new', {email: viewer.email}]"
            >
                Devenir membre
            </a>
            <!-- TODO : UPDATE email when user add e-mail in family member component -->
        </div>

        <!-- CREDIT -->
        <div fxFlex="none" fxLayout="row" fxLayoutAlign="center">
            <div fxLayout="column" fxLayoutGap="20px">
                <div fxLayout="row" fxLayoutAlign="start center">
                    <h2 class="mat-headline no-margin" fxFlex>Solde</h2>
                    <!--
                    <button mat-flat-button color="primary" class="margin-left" (click)="pay()" [disabled]="!config">
                        Faire un versement
                    </button>
                    -->
                </div>

                <app-particle-switch [data]="viewer?.account?.balance || 0">
                    <ng-template let-data="data">
                        <app-money [amount]="data" sizeClass="mat-display-2"></app-money>
                    </ng-template>
                </app-particle-switch>

            </div>
        </div>

    </div>

    <div fxLayout="column" fxLayout.gt-sm="row" fxLayoutGap="30px">

        <div fxLayout="column">
            <mat-divider class="margin-bottom"></mat-divider>

            <div fxLayout="row wrap" fxLayout.gt-sm="column" fxLayoutGap="20px grid" id="menu">

                <div [style.max-width.px]="150">
                    <a mat-button fxLayout="column" fxLayoutAlign="start center" routerLink="/profile" class="big-button">
                        <app-icon name="lake" [size]="50"></app-icon>
                        Sorties
                    </a>
                </div>
                <div [style.max-width.px]="150">
                    <a mat-button fxLayout="column" fxLayoutAlign="start center" routerLink="family" class="big-button">
                        <app-icon name="family" [size]="50"></app-icon>
                        Famille
                    </a>
                </div>
                <div [style.max-width.px]="150">
                    <a mat-button fxLayout="column" fxLayoutAlign="start center" routerLink="history" class="big-button">
                        <app-icon name="transactionHistory" [size]="50"></app-icon>
                        Historique des transactions
                    </a>
                </div>
                <div [style.max-width.px]="150">
                    <a mat-button fxLayout="column" fxLayoutAlign="start center" routerLink="finances" class="big-button">
                        <app-icon name="claims" [size]="50"></app-icon>
                        Dépenses et remboursements
                    </a>
                </div>
                <div *ngIf="canAccessServices()" [style.max-width.px]="150">
                    <a mat-button fxLayout="column" fxLayoutAlign="start center" routerLink="services" class="big-button">
                        <app-icon name="ichtus" [size]="50"></app-icon>
                        Cotisation et services
                    </a>
                </div>
            </div>
        </div>

        <div fxFlex fxLayout="column">
            <mat-divider class="margin-bottom"></mat-divider>
            <router-outlet></router-outlet>
        </div>

    </div>

</div>
