<div *ngIf="dataSource" fxLayout="column">

    <h2 class="mat-display-1">Articles achetés</h2>

    <div fxLayout="column" fxLayoutGap="20px" >

        <div class="margin-v" fxLayout="row" overflow>

            <natural-search (selectionChange)="search($event)"
                            [facets]=""
                            [multipleGroups]="false"
                            [selections]="naturalSearchSelections"
                            fxFlex
            ></natural-search>
        </div>

        <div [fxShow]="dataSource.data?.length > 0" class="responsive-table">

            <div *ngFor="let orderLine of dataSource.data?.items" fxLayout="row" fxLayoutGap="20px">
                <app-file *ngIf="orderLine.product.image" [model]="orderLine.product.image" [height]="100" [style.width.px]="100"></app-file>
                <div fxFlex>
                    <strong *ngIf="orderLine.product.reviewNumber" color="text-primary">{{ orderLine.product.reviewNumber }}</strong>
                    <a [routerLink]="['/larevuedurable/article', orderLine.product.id]"> {{ orderLine.product.name }}</a>
                    <br/>
                    <span>{{ orderLine.type | enum : 'ProductType' | async }}</span>
                    <a mat-button *ngIf="canDownload(orderLine)" [href]="getDownloadLink(orderLine)">Télécharger</a>
                </div>
            </div>

        </div>

        <div *ngIf="dataSource.data?.length === 0" class="margin" fxLayout="column" fxLayoutAlign="center center">
            <div>Pas de résultats</div>
        </div>

        <div *ngIf="!dataSource?.data" class="margin" fxLayout="column" fxLayoutAlign="center center">
            <mat-progress-spinner [diameter]="40" mode="indeterminate"></mat-progress-spinner>
        </div>

        <mat-paginator (page)="pagination($event)"
                       *ngIf="dataSource.data?.length"
                       [length]="dataSource.data?.length"
                       [pageIndex]="dataSource.data?.pageIndex"
                       [pageSizeOptions]="[25]"
                       [pageSize]="25"
        ></mat-paginator>

    </div>
</div>

<natural-fixed-button *ngIf="permissionsService.crud?.product.create" [routerLink]="['/admin/product/new']" icon="add"
></natural-fixed-button>
