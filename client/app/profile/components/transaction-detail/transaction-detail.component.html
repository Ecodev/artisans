<h2 mat-dialog-title>
    {{ transaction.name }}
    <span class="mat-body-1"> - {{ transaction.transactionDate | date: 'mediumDate' }} - {{ transaction.transactionDate | date: 'shortTime' }}</span>
</h2>
<mat-dialog-content>

    <div class="responsive-table">
        <table mat-table [dataSource]="dataSource" matSort (matSortChange)="sorting($event)">

            <tr mat-header-row *matHeaderRowDef="selectedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: selectedColumns;"></tr>
            <!--<tr mat-footer-row *matFooterRowDef="selectedColumns"></tr>-->

            <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Nom</th>
                <td mat-cell *matCellDef="let element">{{ element.name }}</td>
                <td mat-footer-cell *matFooterCellDef></td>
            </ng-container>

            <ng-container matColumnDef="balance">
                <th mat-header-cell *matHeaderCellDef mat-sort-header app-4em-column>Montant</th>
                <td mat-cell *matCellDef="let element">
                    <app-transaction-amount displayMode="amount"
                                            [transactionLine]="element"
                                            [relativeToAccount]="data.routeSnapshot.data.viewer.model.account"
                    ></app-transaction-amount>

                </td>
                <td mat-footer-cell *matFooterCellDef>
                    <span *ngIf="dataSource?.data.totalBalance > 0">{{dataSource.data.totalBalance | currency : 'CHF'}}</span>
                </td>
            </ng-container>

            <ng-container matColumnDef="transactionDate">
                <th mat-header-cell *matHeaderCellDef app-date-column mat-sort-header>Date</th>
                <td mat-cell *matCellDef="let element">
                    {{ element.transactionDate | date: 'mediumDate' }} - {{ element.transactionDate | date: 'shortTime' }}
                </td>
                <td mat-footer-cell *matFooterCellDef></td>
            </ng-container>

            <ng-container matColumnDef="remarks">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Remarques</th>
                <td mat-cell *matCellDef="let element">
                    <div [innerHTML]="element.remarks" class="line-break"></div>
                </td>
                <td mat-footer-cell *matFooterCellDef></td>
            </ng-container>

        </table>
    </div>

    <div fxLayout="column" fxLayoutAlign="center center" class="margin" *ngIf="dataSource.data?.length === 0">
        <div>Pas de r√©sultats</div>
    </div>

    <div fxLayout="column" fxLayoutAlign="center center" class="margin" *ngIf="dataSource.data?.length === null">
        <mat-progress-spinner mode="indeterminate" [diameter]="40"></mat-progress-spinner>
    </div>

    <mat-paginator *ngIf="dataSource.data?.length && dataSource.data.length > dataSource.data.pageSize" [length]="dataSource.data?.length" [pageSize]="dataSource.data?.pageSize" [pageIndex]="dataSource.data?.pageIndex" [pageSizeOptions]="pageSizeOptions" (page)="pagination($event)"
    ></mat-paginator>

</mat-dialog-content>

<mat-dialog-actions fxLayout="row" fxLayoutAlign="end" >
    <button mat-button [mat-dialog-close]="data.routeSnapshot.data.escapeRouterLink">Fermer</button>
</mat-dialog-actions>
